<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Covid 19 Dashboard</title>

        <link rel="stylesheet"
            href="http://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
            crossorigin="anonymous">

        <script
            src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

        <script
            src="http://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>

        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
            crossorigin="anonymous"></script>
    </head>

    <body>

        <style>

            /* Style the button that is used to open and close the collapsible content */
/* Add the following styles to your existing styles */

.collapsible {
    background-color: #f2f2f2;
    border: none;
    text-align: left;
    padding: 10px;
    width: 100%;
    cursor: pointer;
    outline: none;
    transition: background-color 0.3s;
}

.collapsible:hover {
    background-color: #ddd;
}

.content {
    padding: 0 18px;
    display: none;
    overflow: hidden;
    background-color: #f9f9f9;
    border: 1px solid #ccc;
    margin-top: 5px;
}

.show {
    display: block !important;
}


/* Add a background color to the button if it is clicked on (add the .active class with JS), and when you move the mouse over it (hover) */
.active, .collapsible:hover {
  background-color: #ccc;
}

/* Style the collapsible content. Note: hidden by default */
.content {
  padding: 0 18px;
  display: none;
  overflow: hidden;
  background-color: #f1f1f1;
}
        .sidebar {
            background-color: rgb(132, 132, 131);
            padding: 0px;
        }

        #menu {
            margin-top: 40px;
            list-style: none;
        }

        #menu li a {
            color: rgb(27, 27, 27);
            text-decoration: none;
            font-size: large;
            padding: 10px;
        }
 
        #menu li a:hover,
        #menu li:hover a,
        #menu li:hover {
            color: aliceblue;
            background-color: rgb(73, 73, 73);
        }



        #menu li {
            margin-bottom: 20px;
            padding: 10px;
        }

        .head h2 {
            padding: 10px;

        }

        .user {
            text-align: right;
            padding: 20px;
        }

        .dashboard {
            padding: 15px;
            background-color: rgb(203, 203, 203);
            text-align: center;
        }

        .pie,.datatable {
            background-color: rgb(255, 255, 255);
            margin: 10px;
            margin-bottom: 150px;
            padding: 20px;

        }

        .footer{
            padding: 10px;
        }


        .datatable-container {
        border: 2px solid #ccc;
        margin-bottom: 20px;
        padding: 20px;
        border-radius: 8px;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th, .table td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }

    </style>
        <div class="container-fluid">
            <div class="row">
                <div class="col-2 sidebar">

                    <div class="head">
                        <h2>Covid Dashboard</h2>
                    </div>
                    <ul id="menu">
                        <li><a href="index.html" class="active">Home Page</a></li>
                        <li><a href="viz.html">More Visualizations</a></li>
                    </ul>

                </div>
                <div class="col-10">
                    <div class="row">
                        <div class="col user">
                            <h2>Welcome</h2>
                        </div>
                    </div>
                    <div class="row dashboard">
                        <h2 class =>Dashboard</h2>
                        <div class="col-6"
                            style="background-color: white; border: 2px solid #ccc;">
                            <canvas id="pieChart" width="100" height="100"></canvas>
                        </div>
                        <div class="col-6 bar"
                            style="background-color: white; border: 2px solid #ccc;">
                            <canvas id="myBarChart" width="400" height="400"></canvas>
                        </div>
                        <div class="col-6"
                            style="background-color: white; border: 2px solid #ccc; padding-top: 50px;">
                            <canvas id="lineChart" width="400" height="300"></canvas>
                        </div>
                        <div class="col-6"
                            style="background-color: white; border: 2px solid #ccc;">
                            <canvas id="polarChart" width="400" height="400"></canvas>
                        </div>

                        <div class="col-12 datatable-container"
                            style="background-color: white; border: 2px solid #ccc; margin-bottom: 20px;">
                            <table id="myTable">
                                <thead>
                                    <tr>
                                        <th>Country</th>
                                        <th>Active Cases</th>
                                        <th>Deaths</th>
                                        <th>Recovered Cases</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>

                        <div class="col-6"
                            style="background-color: white; border: 2px solid #ccc;">
                            <canvas id="radarChart" width="400" height="400"></canvas>
                        </div>
                        <div class="col-6"
                            style="background-color: white; border: 2px solid #ccc;">
                            <canvas id="donutChartDeaths" width="400"
                                height="400"></canvas>
                        </div>

                    </div>
                    <h3>COVID-19 Economincal Country Summary</h3>
                    <ul id="countryList" class="expandable-list">
                        <!-- Country buttons and descriptions will be added dynamically here -->
                    </ul>
                    <div class="row">
                        <div class="col footer">
                            &copy; Garima Gulati Tony Rolly 2023 <br>
                            The data used is a sample set only for Project
                            purposes.
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <script>
            var coll = document.getElementsByClassName("collapsible");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.display === "block") {
      content.style.display = "none";
    } else {
      content.style.display = "block";
    }
  });
}
        // Function to load JSON data and generate the pie chart
        function loadPieChartData() {
            $.getJSON('Data.json', function(data) {
                generatePieChart(data);
            });
        }

        // Function to generate the pie chart
        function generatePieChart(data) {
            var countries = [];
            var activeCases = [];

            // Extract data for active cases and countries
            data.forEach(function(entry) {
                countries.push(entry["Country/Region"]);
                activeCases.push(entry["Active"]);
            });

            // Create the pie chart
            var pieChart = new Chart(document.getElementById("pieChart"), {
                type: "pie",
                data: {
                    labels: countries,
                    datasets: [{
                        label: "Active Cases",
                        data: activeCases,
                        backgroundColor: [
                            'rgb(255, 184, 184)',   // Light Red
                            'rgb(184, 207, 255)',   // Light Blue
                            'rgb(255, 236, 184)',   // Light Yellow
                            'rgb(184, 255, 235)',   // Light Teal
                            'rgb(216, 184, 255)',   // Light Purple
                            'rgb(255, 214, 184)',   //  Light pink
                            'rgb(255, 184, 207)' ,   // Light Orange
                            'rgb(206, 255, 184)',   // Light Green
                              
                        ],

                    }],
                },

                options: {
                    title: {
                        display: true,
                        text: 'COVID-19 Active Cases by Country', 
                        fontSize: 18, 
                        fontWeight: 'bold',
                        fontColor: 'black',
                     },
                    legend: {
                    display: true,
                    position: 'bottom', // to move the lengend to the bottom.
        },
    },
            });
        }

        // Call the function to load data and generate the pie chart
        loadPieChartData();


         // Function to load JSON data and generate the bar chart
        function loadBarChartData() {
        $.getJSON('data.json', function(data) {
            generateBarChart(data);
        });
         }

         function generateBarChart(data) {
             const labels = data.map(entry => entry["Country/Region"]);
            const confirmedCases = data.map(entry => entry["Confirmed"]);

            const config = {
                        type: 'bar',
                        data: {
                            labels: labels,
                            datasets: [{
                                label: 'Confirmed Cases',
                                data: confirmedCases,
                                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                                borderColor: 'rgb(54, 162, 235)',
                                borderWidth: 1
                            }]
                        },
                        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true,
                    },
                    scaleLabel: {
                        display: true,
                        labelString: 'Number of Confirmed Cases'  // Adding axis title
                    }
                }],
                xAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: 'Countries'  // Adding axis title
                    }
                }]
            },

            legend: {
                display: true,
                position: 'bottom' // Move the legend to the bottom
            },
            title: {
                display: true,
                text: 'COVID-19 Confirmed Cases by Country', 
                fontSize: 18,
                fontWeight: 'bold',
                fontColor: 'black'
            }
        
        }
     
    };

    const ctx = document.getElementById('myBarChart').getContext('2d');
    new Chart(ctx, config);
}

// Call the function to load data and generate the bar chart
loadBarChartData();
        


        function loadDataTable() {
            $.getJSON("Data.json", createTable);
        }


        function createTable(data) {
            let emp_array = [];

            for (e of data) {  // Iterate through the array directly
                let oneEmp = [e["Country/Region"], e["Active"], e["Deaths"], e["Recovered"]];
                emp_array.push(oneEmp);
            }

            $("#myTable").DataTable({
                data: emp_array
            });
        }

           
        loadDataTable();


        function loadLineChartData() {
            $.getJSON('Data.json', function(data) {
                generateLineChart(data);
            });
        }

        function generateLineChart(data) {
            const labels = data.map(entry => entry["Country/Region"]);
            const oneWeekIncrease = data.map(entry => entry["1 week % increase"]);

            const config = {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '1 Week % Increase',
                        data: oneWeekIncrease,
                        fill: false,
                        borderColor: 'rgb(75, 192, 192)',
                        tension: 0.1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: '1 Week % Increase'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Country'
                            }
                        }
                    },
                        legend: {
                            display: true,
                            position: 'bottom'
                        }
                    ,
                    title: {
                        display: true,
                        text: 'Weekly Percentage Increase by Country',
                        fontSize: 18,
                        fontWeight: 'bold',
                        fontColor: 'black'
                    },
                    
                }

            };

            const ctx = document.getElementById('lineChart').getContext('2d');
            new Chart(ctx, config);
        }

        loadLineChartData();

        
    // Function to load JSON data and generate the polar area chart
    function loadPolarChartData() {
        $.getJSON('Data.json', function(data) {
            generatePolarChart(data);
        });
    }

    // Function to generate the polar area chart
    function generatePolarChart(data) {
        var countries = [];
        var recoveredPer100Cases = [];

        // Extract data for recovered / 100 cases and countries
        data.forEach(function(entry) {
            countries.push(entry["Country/Region"]);
            recoveredPer100Cases.push(entry["Recovered / 100 Cases"]);
        });

        // Create the polar area chart
        var polarChart = new Chart(document.getElementById("polarChart"), {
            type: "polarArea",
            data: {
                labels: countries,
                datasets: [{
                    label: "Recovered / 100 Cases",
                    data: recoveredPer100Cases,
                    backgroundColor: [
                    'rgb(255, 209, 220)',   // Light Pink
                    'rgb(195, 236, 198)',   // Light Green
                    'rgb(189, 213, 234)',   // Light Blue
                    'rgb(234, 189, 213)',   // Light Lavender
                    'rgb(213, 189, 204)',   // Light Lilac
                    'rgb(234, 210, 189)',   // Light Peach
                    'rgb(229, 227, 202)',   // Light Beige
                    'rgb(204, 234, 198)',   // Light Mint
                ],

                }],
            },
            options: {
                title: {
                    display: true,
                    text: 'Recovery Rate per Country',
                    fontSize: 18,
                    fontWeight: 'bold',
                    fontColor: 'black',
                },
                legend: {
                    display: true,
                    position: 'bottom',
                },
            },
        });
    }

    // Call the function to load data and generate the polar area chart
    loadPolarChartData();

    function loadRadarChartData() {
        $.getJSON('Data.json', function(data) {
            generateRadarChart(data);
        });
    }

    // Function to generate the radar chart
    function generateRadarChart(data) {
        var countries = [];
        var activeCases = [];
        var deaths = [];
        var recoveredCases = [];

        // Extract data for active cases, deaths, recovered cases, and countries
        data.forEach(function(entry) {
            countries.push(entry["Country/Region"]);
            activeCases.push(entry["Active"]);
            deaths.push(entry["Deaths"]);
            recoveredCases.push(entry["Recovered"]);
        });

        // Create the radar chart
        var radarChart = new Chart(document.getElementById("radarChart"), {
            type: "radar",
            data: {
                labels: countries,
                datasets: [
                    {
                        label: "Active Cases",
                        data: activeCases,
                        backgroundColor: "rgba(255, 99, 132, 0.2)",
                        borderColor: "rgb(255, 99, 132)",
                        borderWidth: 1
                    },
                    {
                        label: "Deaths",
                        data: deaths,
                        backgroundColor: "rgba(54, 162, 235, 0.2)",
                        borderColor: "rgb(54, 162, 235)",
                        borderWidth: 1
                    },
                    {
                        label: "Recovered Cases",
                        data: recoveredCases,
                        backgroundColor: "rgba(75, 192, 192, 0.2)",
                        borderColor: "rgb(75, 192, 192)",
                        borderWidth: 1
                    }
                ]
            },
            options: {
                title: {
                    display: true,
                    text: "COVID-19 Radar Chart by Country",
                    fontSize: 18,
                    fontWeight: "bold",
                    fontColor: "black"
                },
                legend: {
                    display: true,
                    position: "bottom"
                },
                scale: {
                    ticks: {
                        beginAtZero: true
                    }
                }
            }
        });
    }

    // Call the function to load data and generate the radar chart
    loadRadarChartData();

// Function to load JSON data and generate the donut chart for death cases between countries
function loadDonutChartDeathsData() {
    $.getJSON('Data.json', function(data) {
        generateDonutChartDeaths(data);
    });
}

// Function to generate the donut chart for death cases between countries
function generateDonutChartDeaths(data) {
    var countries = [];
    var deaths = [];

    // Extract data for death cases and countries
    data.forEach(function(entry) {
        countries.push(entry["Country/Region"]);
        deaths.push(entry["Deaths"]);
    });
    function generateRandomColors(count) {
    var colors = [];
    for (var i = 0; i < count; i++) {
        var color = 'rgba(' + Math.floor(Math.random() * 256) + ',' + Math.floor(Math.random() * 256) + ',' + Math.floor(Math.random() * 256) + ', 0.6)';
        colors.push(color);
    }
    return colors;
}
    // Create the donut chart for death cases between countries
    var donutChartDeaths = new Chart(document.getElementById("donutChartDeaths"), {
        type: "doughnut",
        data: {
            labels: countries,
            datasets: [{
                label: "Death Cases",
                data: deaths,
                backgroundColor: [
                            'rgb(255, 184, 184)',   // Light Red
                            'rgb(184, 207, 255)',   // Light Blue
                            'rgb(255, 236, 184)',   // Light Yellow
                            'rgb(184, 255, 235)',   // Light Teal
                            'rgb(216, 184, 255)',   // Light Purple
                            'rgb(255, 214, 184)',   //  Light pink
                            'rgb(255, 184, 207)' ,   // Light Orange
                            'rgb(206, 255, 184)',   // Light Green
                              
                        ],
            }],
        },
        options: {
            title: {
                display: true,
                text: 'COVID-19 Death Cases by Country',
                fontSize: 18,
                fontWeight: 'bold',
                fontColor: 'black',
            },
            legend: {
                display: true,
                position: 'bottom',
            },
        },
    });
}


// Call the function to load data and generate the donut chart for death cases between countries

loadDonutChartDeathsData();
function loadCountryList() {
    $.getJSON('Data.json', function(data) {
        generateCountryButtons(data);
    });
}
function generateCountryButtons(data) {
    var countryList = document.getElementById("countryList");

    data.forEach(function(entry) {
        console.log("entry", entry);
        var countryItem = document.createElement("li");
        var countryButton = document.createElement("button");
        var countryDescription = entry["description"];

        countryButton.className = "collapsible";
        countryButton.textContent = entry["Country/Region"];
        countryItem.appendChild(countryButton);

        var countryContent = document.createElement("div");
        countryContent.className = "content";
        countryContent.innerHTML = `<p>${countryDescription}</p>`;
        countryItem.appendChild(countryContent);

        countryList.appendChild(countryItem);

        // Add click event listener to toggle content visibility
        countryButton.addEventListener("click", function() {
            console.log(countryButton);
            countryContent.classList.toggle("show");
        });
    });
}

// Call the function to load data and generate the country buttons
loadCountryList();

    </script>
    </body>

</html>